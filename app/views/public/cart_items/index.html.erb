<h1>ショッピングカート</h1>

<div class='container'>
  
  <div class='row'>
        <table class = "table table-hover table-inverse" >
        <div><%= link_to "カート内を空にする",destroy_all_cart_items_path, class: 'btn btn-danger',  method: :delete%></div>
          <thead>
            <tr>
              <th></th>
              <th>商品名</th>
              <th>単価（税込）</th>
              <th>数量</th>
              <th>小計</th>
              <th colspan="3"></th>
            </tr>
          </thead>
          <tbody>
            <% @cart_items.each do |cart_items| %>
            <tr>
            <%= form_with url:cart_item_path(cart_items),method: :patch,local: true do |f| %>
              <td><%= attachment_image_tag cart_items.item, :image, :fill, 50, 50, fallback: "no-image-icon.jpg" %></td>
              <td><%= cart_items.item.name %></td>
              <td><%= cart_items.item.add_tax_price %></td>
              <td><%= f.select :count, options_for_select((1..9).to_a, {selected: cart_items.count}) %> <%= f.submit "変更",class: 'btn btn-success' %></td>
              <td><%= cart_items.item.add_tax_price * cart_items.count %></td>
              <td><%= link_to "削除する",cart_item_path(cart_items), class: 'btn btn-danger',  method: :delete, "data-confirm" => "本当に削除しますか？" %></td>
            <% end %>
            <tr>
              <% end %>
          </tbody>
        </table>
    </div>
    <div class='row mb-5 pb-5'>
      <div class='col'>
        <%= link_to "買い物を続ける",root_path, class: 'btn btn-primary' %>
      </div>
      <div class='col'>
        <%= form_with model:@order,url:new_order_path,method: :get,local: true do |f| %>
          <%= f.submit "情報入力に進む" %>
        <% end %>
      </div>
  </div>
</div>